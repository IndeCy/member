<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SCRIPTS -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/jquery.zlight.menu.1.0.min.js"></script>

    <!-- STYLES -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="/css/font-awesome.min.css" media="screen">
    <link rel="stylesheet" href="/css/style.css" media="screen">
    <link rel="stylesheet" href="/css/zlight.menu.css" media="screen">

    <title>MainPage</title>
    <script>



    </script>
</head>
<body>
<div class="container" id="main">

    <div class="row">
        <div class="col-lg-12">
            <h4>电子竞技俱乐部粉丝管理信息系统</h4>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">

            <nav id="zlight-nav">
                <ul id="zlight-main-nav">
                    <li class="zlight-dropdown"><a href="/activeMainPage">Home</a></li>
                    <!--<li class="zlight-dropdown">-->
                        <!--<a href="/userPage">用户列表</a>-->
                        <!--<ul class="zlight-submenu">-->
                            <!--&lt;!&ndash;<li><a href="#">添加用户</a></li>&ndash;&gt;-->
                            <!--&lt;!&ndash;<li><a href="#">删除用户</a></li>&ndash;&gt;-->
                            <!--&lt;!&ndash;<li><a href="#">Link 3</a></li>&ndash;&gt;-->
                        <!--</ul>-->
                    <!--</li>-->
                    <li class="zlight-active">
                        <a href="/fansClubPage">俱乐部管理</a>
                        <ul class="zlight-submenu">
                            <!--<li><a href="#">Link 1</a></li>-->
                            <!--<li><a href="#">Link 2</a></li>-->
                            <!--<li><a href="#">Link 3</a></li>-->
                            <!--<li><a href="#">Link 5</a></li>-->
                        </ul>
                    </li>
                    <li><a href="/fansActivePage">粉丝活动管理</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="login">退出登录</a></li>
                </ul>
                <!-- MOBILE NAV -->
                <div id="zlight-mobile-nav">
                    <span>Menu</span>
                    <i class="icon-reorder zlight-icon"></i>
                    <select></select>
                </div>
            </nav> <!-- nav close -->

        </div>
    </div>

    <div class="row"></div>

    <div class="row">
        <div class="col-lg-12">
            <h4 class="zlight-hhh">俱乐部管理</h4>
        </div>
    </div>

    <div class="row" style="margin-bottom:900px;">
        <div class="col-lg-12">
            <p>Club Manager</p>
            <p><button id="addUser" class="btn btn-default">添加俱乐部</button></p>
            <p><h4 style="margin-top:30px;">Features:</h4>
            <form class="form-inline">
                <div class="form-group">
                    <!--<label for="exampleInputName2">Name</label>-->
                    <input type="text" class="form-control" id="clubNameSea" placeholder="ClubName">
                </div>
                <div class="form-group">
                    <!--<label for="exampleInputEmail2">Email</label>-->
                    <input type="text" class="form-control" id="statusSea" placeholder="Address">
                </div>
                <button type="button" id="search" class="btn btn-default">查询</button>
            </form>
            <ul>
                <table class="table table-striped">
                    <thead><tr><th>编号</th><th>名称</th><th>地址</th><th>状态</th><th>操作</th></tr></thead>
                    <tbody></tbody>
                </table>
            </ul>
        </div>
        <!--更改用户表单 -->
        <form class="form-horizontal" style="display:none" onsubmit="return checkForm();" id="updateClub" action="club/editClub">
            <input type="text" name="id" id="clubId" style="display: none;">
            <div class="form-group">
                <label for="inputPassword3" class="col-sm-2 control-label">俱乐部名称</label>
                <div class="col-sm-10">
                    <input type="text"  name="clubName" class="form-control" id="clubName" placeholder="Name">
                </div>
            </div>
            <div class="form-group">
                <label for="inputPassword3" class="col-sm-2 control-label">地址</label>
                <div class="col-sm-10">
                    <input type="text" name="clubAddress" class="form-control" id="clubAddress" placeholder="Address">
                </div>
            </div>
            <div class="form-group">
                <label for="inputPassword3" class="col-sm-2 control-label">状态</label>
                <div class="col-sm-10">
                    <select id ="status" class="form-control" name="status">
                        <option value="1">开启</option>
                        <option value="2">关闭</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" id = "update" class="btn btn-default">确定</button>
                    <button onclick="location.reload()"  class="btn btn-default">取消</button>
                </div>
            </div>
        </form>
        <!-- 添加用户 -->
        <div  id="addAUser" class="addAUser" style="display: none;">
            <input type="text" name="id" id="userId-add" style="display: none;">
            <div class="form-group">
                <label for="inputPassword3" class="col-sm-2 control-label">俱乐部名称</label>
                <div class="col-sm-10">
                    <input type="text"  name="clubName-add" class="form-control" id="clubName-add" placeholder="Name">
                </div>
            </div>

            <div class="form-group">
                <label for="inputPassword3" class="col-sm-2 control-label">地址</label>
                <div class="col-sm-10">
                    <input type="text" name="clubAddress-add" class="form-control" id="clubAddress-add" placeholder="Address">
                </div>
            </div>

            <div class="form-group">
                <label for="inputPassword3" class="col-sm-2 control-label">状态</label>
                <div class="col-sm-10">
                    <select id ="status-add" class="form-control" name="status-add">
                        <option value="1">开启</option>
                        <option value="2">关闭</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button id = "user-add" class="btn btn-default">确定</button>
                    <button onclick="location.reload()"  class="btn btn-default">取消</button>
                </div>
            </div>
        </div>
    </div>

</div>



</div> <!-- main close -->

</div> <!-- container close -->
<script src="js/bootstrap.min.js"></script>
<script src="js/respond.min.js"></script>
<script src="js/jquery.form.js"></script>
<script>
    $(document).ready(function(){
            $('#zlight-nav').zlightMenu();
            $.ajax({
                url: "club/selectClubList",
                async:false,
                success:function(data){
                    var html = "";
                    for(var index in data){
                        var sta = data[index].status==1?"开启":"关闭";
                        html += "<tr>"
                            +"<td>" + data[index].id+ "</td>"
                            +"<td>" + data[index].clubName+ "</td>"
                            +"<td>" + data[index].clubAddress+ "</td>"
                            +"<td>" + sta+ "</td>"
                            +"<td> <button class ='btn btn-default del' data-id="+data[index].id+"> 删除 </button>  <button  class = 'btn btn-default update' data-id="+data[index].id+">更改</button> </td>"
                        "</tr>";
                    }
                    $(".table tbody").html(html);
                    bindEvent()
                }
            })
        });
           function bindEvent(){
             //删除
            $(".del").click(function(){
                $.ajax({
                    url : "club/deleteClub?id="+$(this).attr("data-id"),
                    success : function(data){
                        alert(data);
                        window.location.reload();
                    }
                })
            })
            //更改
            $(".update").click(function(){
                $("table").css("display","none");
                $("form").css("display","block");
                $.ajax({
                    url : "club/selectClub?id="+$(this).attr("data-id"),
                    dataType: "json",
                    success: function(data){
                        $("#clubId").val(data.id);
                        $("#clubName").val(data.clubName);
                        $("#clubAddress").val(data.clubAddress);
                        $(" select option[value='"+data.status+"']").attr("selected","selected");

                    }
                })
            })
           }

            // 添加
            $("#addUser").click(function(){
                $("table").css("display","none");
                $("form").css("display","none");
                $(".addAUser").show();
            })
            //搜索
            $("#search").click(function(){
                var clubName = $("#clubNameSea").val();
                var status = $("#statusSea").val();
                $(".table tbody").html(""); //清空table（除了第一行以外）;
                $.ajax({
                    url : "club/selectClubByConditions?clubName="+clubName+"&clubAddress="+status,
                    dataType:"json",
                    success:function(data){
                            if(data){
                             var html = "";
                                for(var index in data){
                                    var sta = data[index].status==1?"开启":"关闭";
                                    html += "<tr>"
                                    +"<td>" + data[index].id+ "</td>"
                                    +"<td>" + data[index].clubName+ "</td>"
                                    +"<td>" + data[index].clubAddress+ "</td>"
                                    +"<td>" + sta+ "</td>"
                                    +"<td> <button class ='btn btn-default del' data-id="+data[index].id+"> 删除 </button>  <button  class = 'btn btn-default update' data-id="+data[index].id+">更改</button> </td>"
                                "</tr>";
                                }
                                $(".table tbody").html(html);
                                bindEvent();
                            }
                    }
                })
            })


            $("#user-add").click(function () {
                if( $("#clubName-add").val().trim()==""|| $("#clubAddress-add").val().trim()==""){
                    alert("请完善信息");
                    return;
                }
                var data = "clubName="+ $("#clubName-add").val()+"&status="+$("#status-add").val()+"&clubAddress="+$("#clubAddress-add").val();
                $.ajax({
                    url : "club/addClub?"+data,
                    success: function(data){
                        alert(data);
                        window.location.reload();
                    }
                })
            })



    //提交修改
    function checkForm(){
        if( $("#clubName").val().trim()==""|| $("#clubAddress").val().trim()==""){
            alert("请完善信息");
            return false;
        }
        $("#updateClub").ajaxSubmit(function(message) {
            // 对于表单提交成功后处理，message为表单正常提交后返回的内容
            alert(message);
            window.location.reload();
        });
        return false;
    }


</script>

</body>
</html>